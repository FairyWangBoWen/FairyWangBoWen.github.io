require=function s(c,a,r){function l(t,e){if(!a[t]){if(!c[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(d)return d(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var n=a[t]={exports:{}};c[t][0].call(n.exports,function(e){return l(c[t][1][e]||e)},n,n.exports,s,c,a,r)}return a[t].exports}for(var d="function"==typeof require&&require,e=0;e<r.length;e++)l(r[e]);return l}({Global:[function(e,t,i){"use strict";cc._RF.push(t,"8fb77PwAeZNkLSw8Vs6M8WP","Global"),t.exports={goldNum:0},cc._RF.pop()},{}],background:[function(e,t,i){"use strict";cc._RF.push(t,"cb8171qEfdLjq8EWrivDSTJ","background"),cc.Class({extends:cc.Component,properties:{far_bg:cc.Node,far_speed:0,platform_generator:null,bgMusic:cc.AudioClip},onDestroy:function(){cc.audioEngine.stopMusic(this.bgMusic)},onLoad:function(){cc.audioEngine.playMusic(this.bgMusic,!0),this.far_bg.x=0;var e=cc.find("platform-generator");this.platform_generator=e.getComponent("platform-generator")},update:function(e){}}),cc._RF.pop()},{}],"game-scene":[function(e,t,i){"use strict";cc._RF.push(t,"a4fcdkq+H5CqawIqJ2o1wrn","game-scene"),cc.Class({extends:cc.Component,properties:{platform_generator:null,platform_default_0:cc.Node,platform_default_1:cc.Node},onLoad:function(){var e=cc.find("platform-generator");this.platform_generator=e.getComponent("platform-generator"),this.platform_generator.initPlatforms([this.platform_default_0,this.platform_default_1])}}),cc._RF.pop()},{}],"over-scene":[function(e,t,i){"use strict";cc._RF.push(t,"bc97bq3y61BbZWzMjPxDjtK","over-scene");var o=e("Global");cc.Class({extends:cc.Component,properties:{number:cc.Label,btnEffect:cc.AudioClip},onLoad:function(){cc.log("分数是"+o.goldNum),this.number.string=o.goldNum},onclick:function(){cc.audioEngine.playEffect(this.btnEffect),cc.director.loadScene("start"),o.goldNum=0}}),cc._RF.pop()},{Global:"Global"}],"platform-generator":[function(e,t,i){"use strict";cc._RF.push(t,"31ea6y4R2dLuaizAgLGPqh3","platform-generator"),cc.Class({extends:cc.Component,properties:{platform_list:[],move_speed:1,platform_prafab:[cc.Prefab],platform_layer:cc.Node,gold_group_list:[cc.Prefab],maxMoveSpeed:8,Game_state:!0,save_speed:null,save_max_speed:null,stop:{default:null,type:cc.Button},stopString:{default:null,type:cc.Label},btnEffect:cc.AudioClip},onLoad:function(){var t=this;t.stop.node.on(cc.Node.EventType.TOUCH_START,function(e){cc.audioEngine.playEffect(t.btnEffect),t.Game_state?(t.Game_state=!1,t.save_max_speed=t.maxMoveSpeed,t.move_speed=0,t.maxMoveSpeed=0,t.stop.node.color=new cc.color(207,125,146,255),t.stopString.string="PLAY"):(t.Game_state=!0,t.move_speed=t.save_speed,t.maxMoveSpeed=t.save_max_speed,t.stop.node.color=new cc.color(115,197,98,255),t.stopString.string="STOP")})},getState:function(){return this.Game_state},Exit:function(){cc.audioEngine.playEffect(this.btnEffect),cc.director.loadScene("over")},initPlatforms:function(e){(this.platform_list=e).forEach(function(e){e.setAnchorPoint(0,0)},this)},generate:function(e){if(this.Game_state){var t=4*Math.random();t=Math.floor(t);var i=cc.instantiate(this.platform_prafab[t]);i.setAnchorPoint(0,0);var o=this.platform_layer.getContentSize();i.x=o.width;var n=Math.random();i.y=n*(o.height-100),cc.log(i.y);i.y>e.y+100&&(i.y=e.y+100),this.platform_list.push(i),this.platform_layer.addChild(i);var s=3*Math.random();s=Math.floor(s);var c=cc.instantiate(this.gold_group_list[s]),a=i.getContentSize();c.setPosition(a.width/2,a.height),i.addChild(c),cc.log("产出一个平台,平台数=",this.platform_list.length)}else cc.log("我被暂停了")},update:function(e){for(var t,i=[],o=0;o<this.platform_list.length;o++)(t=this.platform_list[o]).x-=this.move_speed,0<t.getBoundingBox().xMax?i.push(t):t.removeFromParent();if(this.platform_list=i,t){var n=cc.director.getWinSize(),s=t.getBoundingBox();s.x+s.width<.8*n.width&&this.generate(t),this.move_speed<this.maxMoveSpeed&&(this.move_speed+=.001,this.save_speed=this.move_speed)}}}),cc._RF.pop()},{}],"sheep-controll2":[function(e,t,i){"use strict";cc._RF.push(t,"b22b8qa6Y9NK6r9swYCV9dP","sheep-controll2"),cc.Class({extends:cc.Component,properties:{speed:cc.v2(0,0),addSpeed:600,maxSpeed:cc.v2(10,1e3),gravity:-1e3,jumpSpeed:300,collisionX:0,collisionY:0,direction:0,jumping:!1,jumpCount:0,drag:1e3,prePosition:cc.v2(0,0),player:null,platform_generator:null,isDead:!1,uiLayer:cc.Node,uiLayerComonent:null},onLoad:function(){this.prePosition.x=this.node.x,this.prePosition.y=this.node.y,cc.director.getCollisionManager().enabled=!0,this.player=this.node.getComponent(cc.Animation);var e=cc.find("platform-generator");this.platform_generator=e.getComponent("platform-generator"),this.uiLayerComonent=this.uiLayer.getComponent("uilayer"),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onDestroy:function(){cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onKeyDown:function(e){if(this.platform_generator.getState())switch(e.keyCode){case cc.KEY.d:this.direction=1,this.jumping||this.player.play("SheepRun");break;case cc.KEY.a:this.direction=-1,this.jumping||this.player.play("SheepRun");break;case cc.KEY.j:(!this.jumping||this.jumpCount<2)&&(this.jumping=!0,this.speed.y=this.jumpSpeed,this.jumpCount++,this.jumpCount<2?this.player.play("SheepJump"):this.player.play("SheepJump2"))}},onKeyUp:function(e){switch(e.keyCode){case cc.KEY.d:1==this.direction&&(this.direction=0);break;case cc.KEY.a:-1==this.direction&&(this.direction=0)}},collisionGoldEnter:function(e,t){e.node.removeFromParent(),this.uiLayerComonent.addGold()},collisionPlatformEnter:function(e,t){var i=t.world.aabb.clone(),o=e.world.aabb,n=t.world.preAabb;if(i.x=n.x,i.y=n.y,i.x=t.world.aabb.x,cc.Intersection.rectRect(i,o))return this.speed.x<0&&i.xMax>o.xMax?(this.node.x=o.xMax,this.collisionX=-1):0<this.speed.x&&i.xMin<o.xMin&&(this.node.x=o.xMin-i.width,this.collisionX=1),void(this.speed.x=0);i.y=t.world.aabb.y,cc.Intersection.rectRect(i,o)&&(this.speed.y<0&&i.yMax>o.yMax&&(this.node.y=o.yMax,this.jumping=!1,this.player.play("SheepRun"),this.jumpCount=0,this.collisionY=-1),this.speed.y=0)},onCollisionEnter:function(e,t){console.log("on collision enter"),cc.log("coll tag = "+e.tag),1==e.tag?this.collisionGoldEnter(e,t):this.collisionPlatformEnter(e,t)},onCollisionStay:function(e,t){if(0==e.tag&&-1===this.collisionY){var i=cc.v2(e.world.aabb.x-e.world.preAabb.x,0);this.node.x+=i.x}},onCollisionExit:function(e,t){console.log("on collision exit"),0==e.tag&&(this.collisionX=0,this.collisionY=0,this.jumping=!0,this.jumpCount=1,this.player.play("SheepJump"))},update:function(e){if(0===this.collisionY&&(this.speed.y+=this.gravity*e,Math.abs(this.speed.y)>this.maxSpeed.y&&(this.speed.y=0<this.speed.y?this.maxSpeed.y:-this.maxSpeed.y)),0===this.direction)0<this.speed.x?(this.speed.x-=this.drag*e,this.speed.x<=0&&(this.speed.x=0)):this.speed.x<0&&(this.speed.x+=this.drag*e,0<=this.speed.x&&(this.speed.x=0));else{var t=0<this.speed.x?1:-1;0==this.speed.x&&(t=0);var i=t==this.direction?this.addSpeed:3e3;this.speed.x+=(0<this.direction?1:-1)*i*e,Math.abs(this.speed.x)>this.maxSpeed.x&&(this.speed.x=0<this.speed.x?this.maxSpeed.x:-this.maxSpeed.x)}0<this.speed.x*this.collisionX&&(this.speed.x=0),this.prePosition.x=this.node.x,this.prePosition.y=this.node.y;var o=this.node.x+this.speed.x*e;this.node.y,this.speed.y;o>cc.director.getWinSize().width-88?(this.node.x=cc.director.getWinSize().width-88,cc.log("我现在是"+this.node.x)):this.node.x+=this.speed.x*e,this.node.y+=this.speed.y*e,this.isDead||this.node.x<0|this.node.y<0&&(cc.director.loadScene("over"),this.isDead=!0)}}),cc._RF.pop()},{}],"sheep-controll":[function(e,t,i){"use strict";cc._RF.push(t,"73832jdnQBFQrIrVWcJMWCc","sheep-controll"),cc.Class({extends:cc.Component,properties:{speed:cc.v2(0,0),addSpeed:600,maxSpeed:cc.v2(10,1e3),gravity:-1e3,jumpSpeed:300,collisionX:0,collisionY:0,direction:0,jumping:!1,jumpCount:0,drag:1e3,prePosition:cc.v2(0,0),player:null,platform_generator:null,isDead:!1,behind:{default:null,type:cc.Button},forward:{default:null,type:cc.Button},jump:{default:null,type:cc.Button},uiLayer:cc.Node,uiLayerComonent:null},onLoad:function(){this.prePosition.x=this.node.x,this.prePosition.y=this.node.y,cc.director.getCollisionManager().enabled=!0,this.player=this.node.getComponent(cc.Animation);var e=cc.find("platform-generator");this.platform_generator=e.getComponent("platform-generator"),this.uiLayerComonent=this.uiLayer.getComponent("uilayer");var t=this;t.forward.node.on(cc.Node.EventType.TOUCH_START,function(e){t.platform_generator.getState()&&(t.direction=1,t.jumping||t.player.play("SheepRun"),cc.log("向前"))}),t.behind.node.on(cc.Node.EventType.TOUCH_START,function(e){t.platform_generator.getState()&&(t.direction=-1,t.jumping||t.player.play("SheepRun"),cc.log("向后"))}),t.jump.node.on(cc.Node.EventType.TOUCH_START,function(e){t.platform_generator.getState()&&(!t.jumping||t.jumpCount<2)&&(t.jumping=!0,t.speed.y=t.jumpSpeed,console.log("shangtiao"),t.jumpCount++,t.jumpCount<2?t.player.play("SheepJump"):t.player.play("SheepJump2"))}),t.behind.node.on(cc.Node.EventType.TOUCH_END,function(e){-1==t.direction&&(t.direction=0)}),t.forward.node.on(cc.Node.EventType.TOUCH_END,function(e){1==t.direction&&(t.direction=0),console.log("在按钮上松开")})},onDestroy:function(){cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1},collisionGoldEnter:function(e,t){e.node.removeFromParent(),this.uiLayerComonent.addGold()},collisionPlatformEnter:function(e,t){var i=t.world.aabb.clone(),o=e.world.aabb,n=t.world.preAabb;if(i.x=n.x,i.y=n.y,i.x=t.world.aabb.x,cc.Intersection.rectRect(i,o))return this.speed.x<0&&i.xMax>o.xMax?(this.node.x=o.xMax,this.collisionX=-1):0<this.speed.x&&i.xMin<o.xMin&&(this.node.x=o.xMin-i.width,this.collisionX=1),void(this.speed.x=0);i.y=t.world.aabb.y,cc.Intersection.rectRect(i,o)&&(this.speed.y<0&&i.yMax>o.yMax&&(this.node.y=o.yMax,this.jumping=!1,this.player.play("SheepRun"),this.jumpCount=0,this.collisionY=-1),this.speed.y=0)},onCollisionEnter:function(e,t){console.log("on collision enter"),cc.log("coll tag = "+e.tag),1==e.tag?this.collisionGoldEnter(e,t):this.collisionPlatformEnter(e,t)},onCollisionStay:function(e,t){if(0==e.tag&&-1===this.collisionY){var i=cc.v2(e.world.aabb.x-e.world.preAabb.x,0);this.node.x+=i.x}},onCollisionExit:function(e,t){console.log("on collision exit"),0==e.tag&&(this.collisionX=0,this.collisionY=0,this.jumping=!0,this.jumpCount=1,this.player.play("SheepJump"))},update:function(e){if(0===this.collisionY&&(this.speed.y+=this.gravity*e,Math.abs(this.speed.y)>this.maxSpeed.y&&(this.speed.y=0<this.speed.y?this.maxSpeed.y:-this.maxSpeed.y)),0===this.direction)0<this.speed.x?(this.speed.x-=this.drag*e,this.speed.x<=0&&(this.speed.x=0)):this.speed.x<0&&(this.speed.x+=this.drag*e,0<=this.speed.x&&(this.speed.x=0));else{var t=0<this.speed.x?1:-1;0==this.speed.x&&(t=0);var i=t==this.direction?this.addSpeed:3e3;this.speed.x+=(0<this.direction?1:-1)*i*e,Math.abs(this.speed.x)>this.maxSpeed.x&&(this.speed.x=0<this.speed.x?this.maxSpeed.x:-this.maxSpeed.x)}0<this.speed.x*this.collisionX&&(this.speed.x=0),this.prePosition.x=this.node.x,this.prePosition.y=this.node.y;var o=this.node.x+this.speed.x*e;this.node.y,this.speed.y;o>cc.director.getWinSize().width-88?(this.node.x=cc.director.getWinSize().width-88,cc.log("我现在是"+this.node.x)):this.node.x+=this.speed.x*e,this.node.y+=this.speed.y*e,this.isDead||this.node.x<0|this.node.y<0&&(cc.director.loadScene("over"),this.isDead=!0)}}),cc._RF.pop()},{}],"start-scene":[function(e,t,i){"use strict";cc._RF.push(t,"f6c561oQa1HkYVIZckGKdYr","start-scene"),cc.Class({extends:cc.Component,properties:{btnEffect:cc.AudioClip},onclik:function(){cc.audioEngine.playEffect(this.btnEffect),cc.director.loadScene("game")},onclik2:function(){cc.audioEngine.playEffect(this.btnEffect),cc.director.loadScene("game2")}}),cc._RF.pop()},{}],uilayer:[function(e,t,i){"use strict";cc._RF.push(t,"a4cd0tjUw9OmLFqoGfTLK7v","uilayer");var o=e("Global");cc.Class({extends:cc.Component,properties:{gold_label:cc.Label,goldNum:0,star1:cc.AudioClip},onLoad:function(){},addGold:function(){this.goldNum++,cc.audioEngine.playEffect(this.star1),this.gold_label.string=this.goldNum+"",o.goldNum=this.goldNum}}),cc._RF.pop()},{Global:"Global"}]},{},["Global","background","game-scene","over-scene","platform-generator","sheep-controll","sheep-controll2","start-scene","uilayer"]);